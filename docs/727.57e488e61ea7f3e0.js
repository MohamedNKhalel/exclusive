"use strict";(self.webpackChunktask1=self.webpackChunktask1||[]).push([[727],{2727:(k,d,r)=>{r.r(d),r.d(d,{CartComponent:()=>M});var s=r(177),a=r(4341),u=r(8934),_=r(541),p=r(5794),t=r(2598),g=r(8490);function b(e,i){if(1&e){const n=t.RV6();t.j41(0,"button",32),t.bIt("click",function(){t.eBV(n);const c=t.XpG().index,l=t.XpG(2);return t.Njj(l.deleteCartProduct(c))}),t.nrm(1,"i",33),t.EFF(2,"Delete"),t.k0s()}}const C=function(e){return["/details",e]};function h(e,i){if(1&e){const n=t.RV6();t.j41(0,"tr",24)(1,"td",25),t.nrm(2,"img",26),t.j41(3,"h2",27),t.EFF(4),t.k0s()(),t.j41(5,"td",28),t.EFF(6),t.k0s(),t.j41(7,"td",29)(8,"input",30),t.bIt("change",function(c){t.eBV(n);const l=t.XpG(2);return t.Njj(l.changeQuantity(c))})("ngModelChange",function(c){const O=t.eBV(n).$implicit;return t.Njj(O.quantity=c)}),t.k0s()(),t.j41(9,"td"),t.EFF(10),t.k0s(),t.j41(11,"td"),t.DNE(12,b,3,0,"button",31),t.k0s()()}if(2&e){const n=i.$implicit,o=t.XpG(2);t.R7$(1),t.Y8G("routerLink",t.eq3(8,C,null==n||null==n.product?null:n.product.id)),t.R7$(1),t.Y8G("src",null==n||null==n.product?null:n.product.image,t.B4B),t.R7$(2),t.JRh(null==n||null==n.product?null:n.product.title.split(" ").slice(0,1).join(" ")),t.R7$(2),t.SpI("$",null==n||null==n.product?null:n.product.price,""),t.R7$(2),t.Y8G("disabled",!o.updateClicked)("ngModel",n.quantity),t.R7$(2),t.SpI("$",(null==n||null==n.product?null:n.product.price)*n.quantity,""),t.R7$(2),t.Y8G("ngIf",o.updateClicked)}}function P(e,i){if(1&e){const n=t.RV6();t.j41(0,"button",34),t.bIt("click",function(){t.eBV(n);const c=t.XpG(2);return t.Njj(c.updateClicked=!c.updateClicked)}),t.EFF(1,"update cart"),t.k0s()}}function m(e,i){if(1&e){const n=t.RV6();t.j41(0,"button",35),t.bIt("click",function(){t.eBV(n);const c=t.XpG(2);return t.Njj(c.updateClicked=!c.updateClicked)}),t.EFF(1,"Done"),t.k0s()}}function f(e,i){if(1&e&&(t.j41(0,"div",1)(1,"div",2)(2,"span",3),t.EFF(3,"home"),t.k0s(),t.j41(4,"span",4),t.EFF(5,"cart"),t.k0s()(),t.j41(6,"div",5)(7,"table")(8,"thead")(9,"tr")(10,"th"),t.EFF(11,"Product"),t.k0s(),t.j41(12,"th"),t.EFF(13,"Price"),t.k0s(),t.j41(14,"th"),t.EFF(15,"Quantity"),t.k0s(),t.j41(16,"th",6),t.EFF(17,"Subtotal"),t.k0s()()(),t.j41(18,"tbody"),t.DNE(19,h,13,10,"tr",7),t.k0s()(),t.j41(20,"div",8)(21,"button",9),t.EFF(22,"return to shop"),t.k0s(),t.DNE(23,P,2,0,"button",10),t.DNE(24,m,2,0,"button",11),t.k0s(),t.j41(25,"div",12)(26,"div",13)(27,"div",14),t.nrm(28,"input",15),t.j41(29,"button",16),t.EFF(30,"aplly coupon"),t.k0s()()(),t.j41(31,"div",17)(32,"div",18)(33,"h2"),t.EFF(34,"Cart Total"),t.k0s(),t.j41(35,"ul",19)(36,"li",20)(37,"p",21),t.EFF(38,"Subtotal:"),t.k0s(),t.j41(39,"span"),t.EFF(40),t.k0s()(),t.j41(41,"li",20)(42,"p",21),t.EFF(43,"Shipping:"),t.k0s(),t.j41(44,"span"),t.EFF(45,"free"),t.k0s()(),t.j41(46,"li",22)(47,"p",21),t.EFF(48,"Total:"),t.k0s(),t.j41(49,"span"),t.EFF(50),t.k0s()()(),t.j41(51,"button",23),t.EFF(52,"process to checkout"),t.k0s()()()()()()),2&e){const n=t.XpG();t.R7$(19),t.Y8G("ngForOf",n.cartProducts),t.R7$(4),t.Y8G("ngIf",!n.updateClicked),t.R7$(1),t.Y8G("ngIf",n.updateClicked),t.R7$(16),t.SpI("$",n.totalPrice.toFixed(),""),t.R7$(10),t.SpI("$",n.totalPrice.toFixed(),"")}}let M=(()=>{class e{constructor(n,o,c){this._DataService=n,this._Router=o,this._ToastrService=c,this.cartProducts=[],this.totalPrice=0,this.updateClicked=!1,this.cartBackend=[],this.isBillingShown=!1}ngOnInit(){this._Router.events.subscribe(()=>{this.isBillingShown=this._Router.url.includes("billing")}),this.getProducts(),this._DataService.getCart().subscribe(n=>{console.log(n)})}getProducts(){null!=localStorage.getItem("cartProducts")&&(this.cartProducts=JSON.parse(localStorage.getItem("cartProducts")),this.cartBackend=this.cartProducts.map(n=>({productId:n.product.id,quantity:n.quantity})),console.log(this.cartBackend),console.log(this.cartProducts),this.calcCartTotal())}calcCartTotal(){for(let n=0;n<this.cartProducts.length;n++)this.totalPrice+=this.cartProducts[n].product.price*this.cartProducts[n].quantity,localStorage.setItem("totalPrice",JSON.stringify(this.totalPrice)),this.updateLocalStorage()}changeQuantity(n){this.totalPrice=0,this.calcCartTotal(),this.updateLocalStorage()}updateLocalStorage(){localStorage.setItem("cartProducts",JSON.stringify(this.cartProducts))}deleteCartProduct(n){this.totalPrice=0,this.cartProducts.splice(n,1),this.calcCartTotal(),this.updateLocalStorage(),this._DataService.cartNumber.next(this.cartProducts.length),this._ToastrService.success("Item deleted successfully")}addNewCart(){this._DataService.addCart({userId:5,date:new Date,products:this.cartBackend}).subscribe({next:o=>{console.log(o)},error:o=>{console.log(o)}})}static{this.\u0275fac=function(o){return new(o||e)(t.rXU(g.u),t.rXU(u.Ix),t.rXU(p.tw))}}static{this.\u0275cmp=t.VBU({type:e,selectors:[["app-cart"]],standalone:!0,features:[t.Jv_([p.tw]),t.aNF],decls:2,vars:1,consts:[["class","container",4,"ngIf"],[1,"container"],[1,"directions"],["routerLink","/home",1,"previous"],[1,"current"],[1,"py-5"],["colspan","2"],["class","product cursor-pointer",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between","align-items-center","table-buttons"],["routerLink","/home","type","button"],["type","button",3,"click",4,"ngIf"],["class","done-btn","type","button",3,"click",4,"ngIf"],[1,"row","g-4","my-5"],[1,"col-md-6"],[1,"coupon","d-flex","gap-3"],["type","text","placeholder","Coupon Code"],["type","button",1,"main-btn"],[1,"col-md-5","offset-lg-1"],[1,"cart-total","border","border-black","rounded-1","p-3"],[1,"list-unstyled","mt-4","d-flex","flex-column","gap-4"],[1,"pb-3","border-bottom","border-black","d-flex","justify-content-between","align-items-center"],[1,"m-0"],[1,"d-flex","justify-content-between","align-items-center"],["routerLink","billing","type","button",1,"main-btn","d-block","m-auto"],[1,"product","cursor-pointer"],[1,"d-flex","align-items-center","justify-content-start","product-info","gap-lg-5",3,"routerLink"],["alt","",3,"src"],[1,"h6","m-0"],[1,"product-price"],[1,"product-quantity"],["min","0","type","number","title","quantity",3,"disabled","ngModel","change","ngModelChange"],["type","button","class","btn delete-btn btn-danger",3,"click",4,"ngIf"],["type","button",1,"btn","delete-btn","btn-danger",3,"click"],[1,"fa","fa-trash-can","me-2"],["type","button",3,"click"],["type","button",1,"done-btn",3,"click"]],template:function(o,c){1&o&&(t.DNE(0,f,53,5,"div",0),t.nrm(1,"router-outlet")),2&o&&t.Y8G("ngIf",!c.isBillingShown)},dependencies:[s.MD,s.Sq,s.bT,a.YN,a.me,a.Q0,a.BC,a.VZ,a.vS,u.Wk,u.n3,_.G],styles:["table[_ngcontent-%COMP%]{width:100%;border-collapse:separate;margin-bottom:20px;color:#000;border-spacing:0 20px}table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:25px 20px;text-align:start}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{box-shadow:0 0 13px 1px #0000000d;border-radius:var(--raduis)}table[_ngcontent-%COMP%]   .product[_ngcontent-%COMP%]{transition:all .3s ease}table[_ngcontent-%COMP%]   .product[_ngcontent-%COMP%]:hover{background-color:var(--gray);transform:scale(1.01)}table[_ngcontent-%COMP%]   .product[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]{justify-content:center}table[_ngcontent-%COMP%]   .product[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50px}table[_ngcontent-%COMP%]   .product[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1em;line-height:24px}table[_ngcontent-%COMP%]   .product[_ngcontent-%COMP%]   .product-quantity[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{text-align:center;width:50px;border-radius:var(--raduis);border:solid 2px rgba(0,0,0,.5)}.table-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#fff;padding:12px 32px;border:solid 1px black;border-radius:var(--raduis);transition:all .3s ease}.table-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:var(--black);color:#fff}.table-buttons[_ngcontent-%COMP%]   .done-btn[_ngcontent-%COMP%]{background-color:var(--green);font-weight:500;transition:all .3s ease}.table-buttons[_ngcontent-%COMP%]   .done-btn[_ngcontent-%COMP%]:hover{background-color:var(--primary-color);color:#fff}.coupon[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:60%;padding:16px 40px;border-radius:var(--raduis);border:solid black 1px;outline:none}.cart-total[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.25em;font-weight:500;line-height:28px}@media screen and (max-width: 768px){.coupon[_ngcontent-%COMP%]{flex-direction:column;row-gap:10px}.coupon[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .coupon[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:12px;padding:5px}.delete-btn[_ngcontent-%COMP%]{font-size:10px}}"]})}}return e})()}}]);