"use strict";(self.webpackChunktask1=self.webpackChunktask1||[]).push([[245],{1245:(P,d,r)=>{r.r(d),r.d(d,{ProfileComponent:()=>_});var a=r(177),c=r(8934),n=r(4341),u=r(541),m=r(5794),e=r(2598);function g(i,l){if(1&i){const t=e.RV6();e.j41(0,"i",34),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.edit())}),e.k0s()}}function p(i,l){if(1&i&&(e.j41(0,"div",35)(1,"p",14),e.EFF(2),e.k0s()()),2&i){const t=e.XpG();e.R7$(2),e.JRh(t.passErrMsg)}}function h(i,l){if(1&i){const t=e.RV6();e.j41(0,"div",36)(1,"button",37),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.edit())}),e.EFF(2,"Cancel"),e.k0s(),e.j41(3,"button",38),e.EFF(4,"save Changes"),e.k0s()()}if(2&i){const t=e.XpG();let s;e.R7$(3),e.Y8G("disabled",""==(null==(s=t.editForm.get("firstName"))?null:s.value)||""==(null==(s=t.editForm.get("lastName"))?null:s.value)||""==(null==(s=t.editForm.get("email"))?null:s.value)||""==(null==(s=t.editForm.get("address"))?null:s.value))}}const f=function(i,l,t,s){return{"border-warning":i,border:l,"border-2":t,"p-2":s}};let _=(()=>{class i{constructor(t,s){this._Router=t,this._ToastrService=s,this.userInfo={},this.editClicked=!1,this.allUsers=[],this.loggedUser=[],this.passErrMsg="",this.editForm=new n.gE({firstName:new n.MJ({value:null,disabled:!this.editClicked}),lastName:new n.MJ({value:null,disabled:!this.editClicked}),email:new n.MJ({value:null,disabled:!this.editClicked}),address:new n.MJ({value:null,disabled:!this.editClicked}),currentPass:new n.MJ({value:null,disabled:!this.editClicked}),newPass:new n.MJ({value:null,disabled:!this.editClicked}),confirmPass:new n.MJ({value:null,disabled:!this.editClicked})})}ngOnInit(){this.getUserInfo(),this.getUsers(),this.passValues()}getUserInfo(){null!=sessionStorage.getItem("token")?(this.userInfo=JSON.parse(sessionStorage.getItem("token"))[0],console.log(this.userInfo)):this._Router.navigate(["/guest/login"])}passValues(){this.editForm.get("firstName")?.setValue(this.loggedUser[0].name.split(" ").slice(0,1).join(" ")),this.editForm.get("lastName")?.setValue(this.loggedUser[0].name.split(" ").slice(1,2).join(" ")),this.editForm.get("email")?.setValue(this.loggedUser[0].email),this.editForm.get("address")?.setValue(this.loggedUser[0].address)}edit(){this.editClicked=!this.editClicked,this.editClicked?this.editForm.enable():(this.editForm.disable(),this.editForm.get("currentPass")?.setValue(null),this.editForm.get("newPass")?.setValue(null),this.editForm.get("confirmPass")?.setValue(null),this.passErrMsg="")}getUsers(){null!=localStorage.getItem("users")&&(this.allUsers=JSON.parse(localStorage.getItem("users")),console.log(this.allUsers),this.loggedUser=this.allUsers.filter(t=>t.id===this.userInfo.id),console.log(this.loggedUser))}submitEdit(){this.editForm.get("currentPass")?.touched&&this.editForm.get("newPass")?.touched&&this.editForm.get("confirmPass")?.touched||null!=this.editForm.get("currentPass")?.value||null!=this.editForm.get("newPass")?.value||null!=this.editForm.get("confirmPass")?.value?this.loggedUser[0].password===this.editForm.get("currentPass")?.value?this.editForm.get("newPass")?.value===this.editForm.get("confirmPass")?.value?(this.loggedUser[0].password=this.editForm.get("newPass")?.value,this._ToastrService.success("Password Changed Successfully","Done"),this.edit(),this.passErrMsg=""):this.passErrMsg="confirm password not matched":this.passErrMsg="incorrect current password":(this.loggedUser[0].name=`${this.editForm.get("firstName")?.value} ${this.editForm.get("lastName")?.value}`,this.loggedUser[0].email=this.editForm.get("email")?.value,this.loggedUser[0].address=this.editForm.get("address")?.value,this.allUsers=this.allUsers.filter(t=>t.id!==this.userInfo.id),this.allUsers.push(this.loggedUser[0]),localStorage.setItem("users",JSON.stringify(this.allUsers)),this.edit(),this._ToastrService.success("Profile Updated Successfully","Done"))}static{this.\u0275fac=function(s){return new(s||i)(e.rXU(c.Ix),e.rXU(m.tw))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-profile"]],standalone:!0,features:[e.Jv_([m.tw]),e.aNF],decls:76,vars:11,consts:[[1,"container"],[1,"d-flex","top-profile","justify-content-between","align-items-center","mt-5"],[1,"directions","m-0"],["routerLink","/home",1,"previous"],[1,"current"],[1,"user-name","m-0"],[1,"row","my-5"],[1,"col-md-3"],[1,"option"],[1,"list-unstyled"],[1,"active-option"],[1,"col-md-9"],[1,"p-5","shadow","rounded-1","option-details"],[1,"d-flex","justify-content-between","align-items-center","mb-4"],[1,"m-0"],["class","fa-regular cursor-pointer fa-xl fa-pen-to-square",3,"click",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"row","gx-5","gy-4","align-items-center","justify-content-between"],[1,"col-md-6"],[1,"d-flex","flex-column","gap-2"],["for","fName"],["formControlName","firstName","id","fName","type","text"],["for","lName"],["formControlName","lastName","id","lName","type","text"],["for","email"],["formControlName","email","id","email","type","email"],["for","address"],["formControlName","address","id","address","type","text"],[1,"d-flex","flex-column","gap-3","mt-4","rounded-1",3,"ngClass"],["formControlName","currentPass","type","text","placeholder","Current Password"],["formControlName","newPass","type","text","placeholder","New Password"],["formControlName","confirmPass","type","text","placeholder","Confirm New Password"],["class","alert text-center alert-danger mb-0",4,"ngIf"],["class","logic-buttons  d-flex justify-content-end align-items-center mt-4",4,"ngIf"],[1,"fa-regular","cursor-pointer","fa-xl","fa-pen-to-square",3,"click"],[1,"alert","text-center","alert-danger","mb-0"],[1,"logic-buttons","d-flex","justify-content-end","align-items-center","mt-4"],["type","button",1,"main-btn",3,"click"],["type","submit",1,"main-btn",3,"disabled"]],template:function(s,o){1&s&&(e.j41(0,"section")(1,"div",0)(2,"div",1)(3,"div",2)(4,"span",3),e.EFF(5,"home"),e.k0s(),e.j41(6,"span",4),e.EFF(7,"My account"),e.k0s()(),e.j41(8,"h2",5),e.EFF(9,"Welcome! "),e.j41(10,"span"),e.EFF(11),e.k0s()()(),e.j41(12,"div",6)(13,"div",7)(14,"div",8)(15,"h3"),e.EFF(16,"Manage My Account"),e.k0s(),e.j41(17,"ul",9)(18,"li")(19,"a",10),e.EFF(20,"My Profile"),e.k0s()(),e.j41(21,"li")(22,"a"),e.EFF(23,"Address Book"),e.k0s()(),e.j41(24,"li")(25,"a"),e.EFF(26,"My Payment Options"),e.k0s()()()(),e.j41(27,"div",8)(28,"h3"),e.EFF(29,"My Orders"),e.k0s(),e.j41(30,"ul",9)(31,"li")(32,"a"),e.EFF(33,"My Returns"),e.k0s()(),e.j41(34,"li")(35,"a"),e.EFF(36,"My Cancellations"),e.k0s()()()(),e.j41(37,"div",8)(38,"h3"),e.EFF(39,"My WishList"),e.k0s()()(),e.j41(40,"div",11)(41,"div",12)(42,"div",13)(43,"h3",14),e.EFF(44,"Edit Your profile"),e.k0s(),e.DNE(45,g,1,0,"i",15),e.k0s(),e.j41(46,"form",16),e.bIt("ngSubmit",function(){return o.submitEdit()}),e.j41(47,"div",17)(48,"div",18)(49,"div",19)(50,"label",20),e.EFF(51,"First Name"),e.k0s(),e.nrm(52,"input",21),e.k0s()(),e.j41(53,"div",18)(54,"div",19)(55,"label",22),e.EFF(56,"Last Name"),e.k0s(),e.nrm(57,"input",23),e.k0s()(),e.j41(58,"div",18)(59,"div",19)(60,"label",24),e.EFF(61,"Email"),e.k0s(),e.nrm(62,"input",25),e.k0s()(),e.j41(63,"div",18)(64,"div",19)(65,"label",26),e.EFF(66,"Address"),e.k0s(),e.nrm(67,"input",27),e.k0s()()(),e.j41(68,"div",28)(69,"label"),e.EFF(70,"Password Changes"),e.k0s(),e.nrm(71,"input",29)(72,"input",30)(73,"input",31),e.DNE(74,p,3,1,"div",32),e.k0s(),e.DNE(75,h,5,1,"div",33),e.k0s()()()()()()),2&s&&(e.R7$(11),e.JRh(o.loggedUser[0].name),e.R7$(34),e.Y8G("ngIf",!o.editClicked),e.R7$(1),e.Y8G("formGroup",o.editForm),e.R7$(22),e.Y8G("ngClass",e.ziG(6,f,o.passErrMsg,o.passErrMsg,o.passErrMsg,o.passErrMsg)),e.R7$(6),e.Y8G("ngIf",o.passErrMsg),e.R7$(1),e.Y8G("ngIf",o.editClicked))},dependencies:[a.MD,a.YU,a.bT,n.YN,n.qT,n.me,n.BC,n.cb,u.G,n.j4,n.JD,c.Wk],styles:[".user-name[_ngcontent-%COMP%]{font-size:.875em;line-height:21px}.user-name[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--primary-color);margin-left:5px}.option[_ngcontent-%COMP%]{margin-bottom:20px}.option[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1em;font-weight:500;line-height:24px;margin-bottom:10px}.option[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin-left:40px;display:flex;flex-direction:column;row-gap:5px}.option[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{cursor:pointer}.option[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#00000080;text-decoration:none}.option[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .active-option[_ngcontent-%COMP%]{color:var(--primary-color)}.option-details[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.25em;font-weight:500;line-height:28px;color:var(--primary-color)}.option-details[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background-color:var(--secondary-color);padding:15px 30px;border:none;outline:none;border-radius:var(--raduis)}.option-details[_ngcontent-%COMP%]   .logic-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:nth-child(1){background-color:transparent;color:#000;border:none}.option-details[_ngcontent-%COMP%]   .logic-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:nth-child(1):hover{border:none}@media screen and (max-width: 768px){.option-details[_ngcontent-%COMP%]{padding:20px!important}.top-profile[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start!important;row-gap:10px!important}}"]})}}return i})()}}]);